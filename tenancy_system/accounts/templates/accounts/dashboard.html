{% extends 'accounts/base.html' %}
{% block content %}
<h1>Dashboard</h1>
<p>Welcome, {{ request.user.username }}!</p>
<p>
    <a href="{% url 'accounts:profile_update' %}">Update Profile</a> |
    <a href="{% url 'accounts:logout' %}">Logout</a>
</p>
{% endblock %}

<div class="card mt-4">
    <div class="card-header">
        <h3>My Payment History</h3>
    </div>
    <div class="card-body">
        <table class="table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Method</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for payment in payments %}
                    <tr>
                        <td>{{ payment.payment_date }}</td>
                        <td>â‚±{{ payment.amount }}</td>
                        <td>{{ payment.get_payment_method_display }}</td>
                        <td>{{ payment.get_status_display }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">You have not made any payments yet.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="card mt-4">
    <div class="card-header">
        <h3>Notifications & Announcements</h3>
    </div>
    <ul class="list-group list-group-flush">
        {% for notification in notifications %}
            <li class="list-group-item {% if not notification.is_read %}list-group-item-info{% endif %}">
                <strong>{{ notification.title }}</strong>
                <small class="text-muted d-block">{{ notification.created_at|date:"F d, Y" }}</small>
                <p class="mb-0">{{ notification.message }}</p>
            </li>
        {% empty %}
            <li class="list-group-item">You have no new notifications.</li>
        {% endfor %}
    </ul>
</div>

<a href="{% url 'submit_report' %}" class="btn btn-warning">Submit a Report</a>

<div class="card mt-4">
    <div class="card-header">
        <h3>Account Settings</h3>
    </div>
    <div class="card-body">
        <p>Manage your account details and security settings.</p>
        <a href="{% url 'password_change' %}" class="btn btn-info">Change My Password</a>
    </div>
</div>